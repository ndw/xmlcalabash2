<test xmlns='http://xproc.org/ns/testsuite/3.0' expected="pass">
  <pipeline src="opt-drp.xpl"/>
  <schematron>
    <s:schema xmlns:s="http://purl.oclc.org/dsdl/schematron"
              xmlns:p="http://www.w3.org/ns/xproc"
              xmlns:c="http://www.w3.org/ns/xproc-step">
      <s:ns prefix="p" uri="http://www.w3.org/ns/xproc"/>
      <s:ns prefix="c" uri="http://www.w3.org/ns/xproc-step"/>

      <s:pattern>
        <s:rule context="/*">
          <s:assert test="self::c:param-set">The pipeline root is not c:param-set.</s:assert>
        </s:rule>
        <s:rule context="c:param-set">
          <s:assert test="empty(*[not(self::c:param)])">
            The c:param-set element contains illegal children.</s:assert>
        </s:rule>
        <s:rule context="c:param-set">
          <s:assert test="count(c:param) = 1">
            The c:param-set element has the wrong number of c:params.</s:assert>
        </s:rule>
        <s:rule context="c:param">
          <s:assert test="(@name = 'p' and @value = '3')">
            The c:param is incorrect.</s:assert>
        </s:rule>
      </s:pattern>
    </s:schema>
  </schematron>
</test>
