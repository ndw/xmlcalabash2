prefix p = "{http://www.w3.org/ns/xproc}"
prefix cx = "{http://xmlcalabash.com/ns/extensions}"
prefix xc = "com.xmlcalabash.steps."

step p:add-attribute has implementation xc:AddAttribute
  input source
  output result
  option match as XSLTMatchPattern
  option attribute-name as QName
  option attribute-prefix? as NCName
  option attribute-namespace? as anyURI
  option attribute-value

step p:add-xml-base has implementation xc:AddXmlBase
  input source
  output result
  option all? as boolean = 'false'
  option relative? as boolean = 'true'

step p:compare has implementation xc:Compare
  primary input source
  input alternate
  output result
  option fail-if-not-equal? as boolean = 'false'

step p:count has implementation xc:Count
  input source*
  output result
  option limit? as integer = "0"

step p:delete has implementation xc:Delete
  input source
  output result
  option match as XSLTMatchPattern

step p:directory-list has implementation xc:DirectoryList
  output result
  option path as anyURI
  option include-filter? as RegularExpression
  option exclude-filter? as RegularExpression

step p:error has implementation xc:Error
  input source
  output result*
  option code as QName
  option code-prefix? as NCName
  option code-namespace? as anyURI

step p:escape-markup has implementation xc:EscapeMarkup
  input source
  output result
  option cdata-section-elements?
  option doctype-public?
  option doctype-system? as anyURI
  option escape-uri-attributes? as boolean = 'false'
  option include-content-type? as boolean = 'true'
  option indent? as boolean = 'false'
  option media-type?
  option method? as QName = 'xml'
  option omit-xml-declaration? as boolean = 'true'
  option standalone? of (true|false|omit) = 'omit'
  option undeclare-prefixes? as boolean
  option version? as string = '1.0'

step p:filter has implementation xc:Filter
  input source
  output result*
  option select as XPathExpression

step p:http-request has implementation xc:HttpRequest
  input source
  output result
  option byte-order-mark? as boolean
  option cdata-section-elements?
  option doctype-public?
  option doctype-system? as anyURI
  option encoding?
  option escape-uri-attributes? as boolean = 'false'
  option include-content-type? as boolean = 'true'
  option indent? as boolean = 'false'
  option media-type?
  option method? as QName = 'xml'
  option normalization-form? as string = 'none'
  option omit-xml-declaration? as boolean = 'true'
  option standalone? of (true|false|omit) = 'omit'
  option undeclare-prefixes? as boolean
  option version? as string = '1.0'

step p:identity has implementation xc:Identity
  input source*
  output result*

step p:insert has implementation xc:Insert
  primary input source
  input insertion*
  output result
  option match? as XSLTMatchPattern = '/*'
  option position of (first-child|last-child|before|after)

step p:label-elements has implementation xc:LabelElements
  input source
  output result
  option attribute? as QName = 'xml:id'
  option attribute-prefix? as NCName
  option attribute-namespace? as anyURI
  option label? as XPathExpression = 'concat("_",$p:index)'
  option match? as XSLTMatchPattern = '*'
  option replace? as boolean = 'true'

step p:load has implementation xc:Load
  output result
  option href as anyURI
  option dtd-validate? as boolean = 'false'

step p:make-absolute-uris has implementation xc:MakeAbsoluteUris
  input source
  output result
  option match as XSLTMatchPattern
  option base-uri? as anyURI

step p:namespace-rename has implementation xc:NamespaceRename
  input source
  output result
  option from? as anyURI
  option to? as anyURI
  option apply-to? of (all|elements|attributes) = 'all'

step p:pack has implementation xc:Pack
  primary input source*
  input alternate*
  output result*
  option wrapper as QName
  option wrapper-prefix? as NCName
  option wrapper-namespace? as anyURI

step p:parameters has implementation xc:Parameters
  output result
  option parameters

step p:rename has implementation xc:Rename
  input source
  output result
  option match as XSLTMatchPattern
  option new-name as QName
  option new-prefix? as NCName
  option new-namespace? as anyURI

step p:replace has implementation xc:Replace
  primary input source
  input replacement
  output result
  option match as XSLTMatchPattern

step p:set-attributes has implementation xc:SetAttributes
  primary input source
  input attributes
  output result
  option match as XSLTMatchPattern

step p:sink has implementation xc:Sink
  input source*

step p:split-sequence has implementation xc:SplitSequence
  input source*
  primary output matched*
  output not-matched*
  option initial-only? as boolean = 'false'
  option test as XPathExpression

step p:store has implementation xc:Store
  input source
  output result
  option href as anyURI
  option byte-order-mark? as boolean
  option cdata-section-elements?
  option doctype-public?
  option doctype-system? as anyURI
  option encoding?
  option escape-uri-attributes? as boolean = 'false'
  option include-content-type? as boolean = 'true'
  option indent? as boolean = 'false'
  option media-type?
  option method? as QName = 'xml'
  option normalization-form? as NormalizationForm = 'none'
  option omit-xml-declaration? as boolean = 'true'
  option standalone? of (true|false|omit) = 'omit'
  option undeclare-prefixes? as boolean
  option version? as string = '1.0'

step p:string-replace has implementation xc:StringReplace
  input source
  output result
  option match as XSLTMatchPattern
  option replace as XPathExpression

step p:unescape-markup has implementation xc:UnescapeMarkup
  input source
  output result
  option namespace? as anyURI
  option content-type? as string = 'application/xml'
  option encoding?
  option charset?

step p:unwrap has implementation xc:Unwrap
  input source
  output result
  option match as XSLTMatchPattern

step p:wrap has implementation xc:Wrap
  input source
  output result
  option wrapper as QName
  option wrapper-prefix? as NCName
  option wrapper-namespace? as anyURI
  option match as XSLTMatchPattern
  option group-adjacent? as XPathExpression

step p:wrap-sequence has implementation xc:WrapSequence
  input source*
  output result*
  option wrapper as QName
  option wrapper-prefix? as NCName
  option wrapper-namespace? as anyURI
  option group-adjacent? as XPathExpression

step p:xinclude has implementation xc:XInclude
  input source
  output result
  option fixup-xml-base? as boolean = 'false'
  option fixup-xml-lang? as boolean = 'false'

step p:xslt has implementation xc:Xslt
  primary input source*
  input stylesheet
  primary output result
  output secondary*
  option initial-mode? as QName
  option template-name? as QName
  option output-base-uri? as anyURI
  option version?

step p:exec has implementation xc:Exec
  primary input source*
  primary output result
  output errors
  output exit-status
  option command
  option args? as string = ''
  option cwd?
  option source-is-xml? as boolean = 'true'
  option result-is-xml? as boolean = 'true'
  option wrap-result-lines? as boolean = 'false'
  option errors-is-xml? as boolean = 'false'
  option wrap-error-lines? as boolean = 'false'
  option path-separator?
  option failure-threshold? as integer
  option arg-separator? as string = ' '
  option byte-order-mark? as boolean
  option cdata-section-elements?
  option doctype-public?
  option doctype-system? as anyURI
  option encoding?
  option escape-uri-attributes? as boolean = 'false'
  option include-content-type? as boolean = 'true'
  option indent? as boolean = 'false'
  option media-type?
  option method? as QName = 'xml'
  option normalization-form? as NormalizationForm = 'none'
  option omit-xml-declaration? as boolean = 'true'
  option standalone? of (true|false|omit) = 'omit'
  option undeclare-prefixes? as boolean
  option version? as string = '1.0'

step p:hash has implementation xc:Hash
  primary input source
  output result
  option value
  option algorithm as QName
  option match as XSLTMatchPattern
  option version?

step p:uuid has implementation xc:Uuid
  primary input source
  output result
  option match as XSLTMatchPattern
  option version? as integer

step p:validate-with-relax-ng has implementation xc:ValidateWithRelaxNG
  primary input source
  input schema
  output result
  option dtd-attribute-values? as boolean = 'false'
  option dtd-id-idref-warnings? as boolean = 'false'
  option assert-valid? as boolean = 'true'

step p:validate-with-schematron has implementation xc:ValidateWithSchematron
  primary input source
  input schema
  primary output result
  output report*
  option phase? as string = '#ALL'
  option assert-valid? as boolean = 'true'

step p:validate-with-xml-schema has implementation xc:ValidateWithXmlSchema
  primary input source
  input schema*
  output result
  option use-location-hints? as boolean = 'false'
  option try-namespaces? as boolean = 'false'
  option assert-valid? as boolean = 'true'
  option mode? of (strict|lax) = 'strict'

step p:www-form-urldecode has implementation xc:WwwFormUrldecode
  output result
  option value

step p:www-form-urlencode has implementation xc:WwwFormUrlencode
  primary input source
  output result
  option match as XSLTMatchPattern

step p:xquery has implementation xc:XQuery
  primary input source*
  input query
  output result*

step p:xsl-formatter has implementation xc:XslFormatter
  input source
  output result
  option href as anyURI
  option content-type?

// ============================================================

step cx:document has implementation xc:Document
  output result
